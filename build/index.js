Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),n=require("warning"),r=require("react-swipeable-views-core");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var a=o(e),s=i(t),l=i(n);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function f(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}var x=["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"];function b(e,t,n,r){return e.addEventListener(t,n,r),{remove:function(){e.removeEventListener(t,n,r)}}}var S={direction:"ltr",display:"flex",willChange:"transform"},w={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},m={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function M(e,t){var n=t.duration,r=t.easeFunction,i=t.delay;return"".concat(e," ").concat(n," ").concat(r," ").concat(i)}function L(e,t){var n=m.rotationMatrix[t];return{pageX:n.x[0]*e.pageX+n.x[1]*e.pageY,pageY:n.y[0]*e.pageX+n.y[1]*e.pageY}}function T(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function E(e,t){for(var n=[];e&&e!==t&&e!==document.body&&!e.hasAttribute("data-swipeable");){var r=window.getComputedStyle(e);"absolute"===r.getPropertyValue("position")||"hidden"===r.getPropertyValue("overflow-x")?n=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return n}var N=null;function O(e){var t=e.domTreeShapes,n=e.pageX,r=e.startX,i=e.axis;return t.some((function(e){var t=n>=r;"x"!==i&&"y"!==i||(t=!t);var o=Math.round(e[m.scrollPosition[i]]),a=o>0,s=o+e[m.clientLength[i]]<e[m.scrollLength[i]];return!!(t&&s||!t&&a)&&(N=e.element,!0)}))}var C=a.createContext();"production"!==process.env.NODE_ENV&&(C.displayName="SliderViewsContext");var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(s,a.Component);var t,n,i,o=y(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),c(g(t=o.call(this,e)),"rootNode",null),c(g(t),"containerNode",null),c(g(t),"ignoreNextScrollEvents",!1),c(g(t),"viewLength",0),c(g(t),"startX",0),c(g(t),"lastX",0),c(g(t),"vx",0),c(g(t),"startY",0),c(g(t),"isSwiping",void 0),c(g(t),"started",!1),c(g(t),"startIndex",0),c(g(t),"transitionListener",null),c(g(t),"touchMoveListener",null),c(g(t),"activeSlide",null),c(g(t),"indexCurrent",null),c(g(t),"firstRenderTimeout",null),c(g(t),"setRootNode",(function(e){t.rootNode=e})),c(g(t),"setContainerNode",(function(e){t.containerNode=e})),c(g(t),"setActiveSlide",(function(e){t.activeSlide=e,t.updateHeight()})),c(g(t),"handleSwipeStart",(function(e){var n=t.props.axis,r=L(e.touches[0],n);t.viewLength=t.rootNode.getBoundingClientRect()[m.length[n]],t.startX=r.pageX,t.lastX=r.pageX,t.vx=0,t.startY=r.pageY,t.isSwiping=void 0,t.started=!0;var i=window.getComputedStyle(t.containerNode),o=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform");if(o&&"none"!==o){var a=o.split("(")[1].split(")")[0].split(","),s=window.getComputedStyle(t.rootNode),l=L({pageX:parseInt(a[4],10),pageY:parseInt(a[5],10)},n);t.startIndex=-l.pageX/(t.viewLength-parseInt(s.paddingLeft,10)-parseInt(s.paddingRight,10))||0}})),c(g(t),"handleSwipeMove",(function(e){if(t.started){if(null===N||N===t.rootNode){var n=t.props,i=n.axis,o=n.children,s=n.ignoreNativeScroll,l=n.onSwitching,d=n.resistance,c=L(e.touches[0],i);if(void 0===t.isSwiping){var u=Math.abs(c.pageX-t.startX),p=Math.abs(c.pageY-t.startY),h=u>p&&u>r.constant.UNCERTAINTY_THRESHOLD;if(!d&&("y"===i||"y-reverse"===i)&&(0===t.indexCurrent&&t.startX<c.pageX||t.indexCurrent===a.Children.count(t.props.children)-1&&t.startX>c.pageX))return void(t.isSwiping=!1);if(u>p&&e.preventDefault(),!0===h||p>r.constant.UNCERTAINTY_THRESHOLD)return t.isSwiping=h,void(t.startX=c.pageX)}if(!0===t.isSwiping){e.preventDefault(),t.vx=.5*t.vx+.5*(c.pageX-t.lastX),t.lastX=c.pageX;var f=r.computeIndex({children:o,resistance:d,pageX:c.pageX,startIndex:t.startIndex,startX:t.startX,viewLength:t.viewLength}),g=f.index,v=f.startX;if(null===N&&!s)if(O({domTreeShapes:E(e.target,t.rootNode),startX:t.startX,pageX:c.pageX,axis:i}))return;v?t.startX=v:null===N&&(N=t.rootNode),t.setIndexCurrent(g);var y=function(){l&&l(g,"move")};!t.state.displaySameSlide&&t.state.isDragging||t.setState({displaySameSlide:!1,isDragging:!0},y),y()}}}else t.handleTouchStart(e)})),c(g(t),"handleSwipeEnd",(function(){if(N=null,t.started&&(t.started=!1,!0===t.isSwiping)){var e,n=t.state.indexLatest,r=t.indexCurrent,i=n-r;e=Math.abs(t.vx)>t.props.threshold?t.vx>0?Math.floor(r):Math.ceil(r):Math.abs(i)>t.props.hysteresis?i>0?Math.floor(r):Math.ceil(r):n;var o=a.Children.count(t.props.children)-1;e<0?e=0:e>o&&(e=o),t.setIndexCurrent(e),t.setState({indexLatest:e,isDragging:!1},(function(){t.props.onSwitching&&t.props.onSwitching(e,"end"),t.props.onChangeIndex&&e!==n&&t.props.onChangeIndex(e,n,{reason:"swipe"}),r===n&&t.handleTransitionEnd()}))}})),c(g(t),"handleTouchStart",(function(e){t.props.onTouchStart&&t.props.onTouchStart(e),t.handleSwipeStart(e)})),c(g(t),"handleTouchEnd",(function(e){t.props.onTouchEnd&&t.props.onTouchEnd(e),t.handleSwipeEnd(e)})),c(g(t),"handleMouseDown",(function(e){t.props.onMouseDown&&t.props.onMouseDown(e),e.persist(),t.handleSwipeStart(T(e))})),c(g(t),"handleMouseUp",(function(e){t.props.onMouseUp&&t.props.onMouseUp(e),t.handleSwipeEnd(T(e))})),c(g(t),"handleMouseLeave",(function(e){t.props.onMouseLeave&&t.props.onMouseLeave(e),t.started&&t.handleSwipeEnd(T(e))})),c(g(t),"handleMouseMove",(function(e){t.props.onMouseMove&&t.props.onMouseMove(e),t.started&&t.handleSwipeMove(T(e))})),c(g(t),"handleScroll",(function(e){if(t.props.onScroll&&t.props.onScroll(e),e.target===t.rootNode)if(t.ignoreNextScrollEvents)t.ignoreNextScrollEvents=!1;else{var n=t.state.indexLatest,r=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+n;t.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,t.props.onChangeIndex&&r!==n&&t.props.onChangeIndex(r,n,{reason:"focus"})}})),c(g(t),"updateHeight",(function(){if(null!==t.activeSlide){var e=t.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&t.state.heightLatest!==e.offsetHeight&&t.setState({heightLatest:e.offsetHeight})}})),"production"!==process.env.NODE_ENV&&r.checkIndexBounds(e),t.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},t.setIndexCurrent(e.index),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this;this.transitionListener=b(this.containerNode,"transitionend",(function(t){t.target===e.containerNode&&e.handleTransitionEnd()})),this.touchMoveListener=b(this.rootNode,"touchmove",(function(t){e.props.disabled||e.handleSwipeMove(t)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){e.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.index;"number"==typeof n&&n!==e.index&&("production"!==process.env.NODE_ENV&&r.checkIndexBounds(this.props),this.setIndexCurrent(n),this.setState({displaySameSlide:r.getDisplaySameSlide(e,this.props),indexLatest:n}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var e=this;return{slideUpdateHeight:function(){e.updateHeight()}}}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,n=m.transform[t](100*e);this.containerNode.style.WebkitTransform=n,this.containerNode.style.transform=n}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e=this,t=this.props;t.action;var n=t.animateHeight,r=t.animateTransitions,i=t.axis,o=t.children,s=t.containerStyle,d=t.disabled;t.disableLazyLoading;var c=t.enableMouseEvents;t.hysteresis,t.ignoreNativeScroll,t.index,t.onChangeIndex,t.onSwitching,t.onTransitionEnd,t.resistance;var p=t.slideStyle,h=t.slideClassName,g=t.springConfig,v=t.style;t.threshold;var y=f(t,x),b=this.state,L=b.displaySameSlide,T=b.heightLatest,E=b.indexLatest,N=b.isDragging,O=b.renderOnlyActive,X=d?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},j=!d&&c?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{};l.default(!n||!s||!s.height,"react-swipeable-view: You are setting animateHeight to true but you are\nalso providing a custom height.\nThe custom height has a higher priority than the animateHeight property.\nSo animateHeight is most likely having no effect at all.");var H,D,I=Object.assign({},w,p);if(N||!r||L)H="all 0s ease 0s",D="all 0s ease 0s";else if(H=M("transform",g),D=M("-webkit-transform",g),0!==T){var P=", ".concat(M("height",g));H+=P,D+=P}var k={height:null,WebkitFlexDirection:m.flexDirection[i],flexDirection:m.flexDirection[i],WebkitTransition:D,transition:H};if(!O){var R=m.transform[i](100*this.indexCurrent);k.WebkitTransform=R,k.transform=R}return n&&(k.height=T),a.createElement(C.Provider,{value:this.getSwipeableViewsContext()},a.createElement("div",u({ref:this.setRootNode,style:Object.assign({},m.root[i],v)},y,X,j,{onScroll:this.handleScroll}),a.createElement("div",{ref:this.setContainerNode,style:Object.assign({},k,S,s),className:"react-swipeable-view-container"},a.Children.map(o,(function(t,r){if(O&&r!==E)return null;var i;l.default(a.isValidElement(t),"react-swipeable-view: one of the children provided is invalid: ".concat(t,".\n  We are expecting a valid React Element"));var o=!0;return r===E&&(o=!1,n&&(i=e.setActiveSlide,I.overflowY="hidden")),a.createElement("div",{ref:i,style:I,className:h,"aria-hidden":o,"data-swipeable":"true"},t)})))))}}])&&d(t.prototype,n),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();X.displayName="ReactSliderViews",X.propTypes={action:s.default.func,animateHeight:s.default.bool,animateTransitions:s.default.bool,axis:s.default.oneOf(["x","x-reverse","y","y-reverse"]),children:s.default.node.isRequired,containerStyle:s.default.object,disabled:s.default.bool,disableLazyLoading:s.default.bool,enableMouseEvents:s.default.bool,hysteresis:s.default.number,ignoreNativeScroll:s.default.bool,index:s.default.number,onChangeIndex:s.default.func,onMouseDown:s.default.func,onMouseLeave:s.default.func,onMouseMove:s.default.func,onMouseUp:s.default.func,onScroll:s.default.func,onSwitching:s.default.func,onTouchEnd:s.default.func,onTouchMove:s.default.func,onTouchStart:s.default.func,onTransitionEnd:s.default.func,resistance:s.default.bool,slideClassName:s.default.string,slideStyle:s.default.object,springConfig:s.default.shape({delay:s.default.string,duration:s.default.string,easeFunction:s.default.string}),style:s.default.object,threshold:s.default.number},X.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1},exports.SwipeableViewsContext=C,exports.default=X,exports.findNativeHandler=O,exports.getDomTreeShapes=E;
//# sourceMappingURL=index.js.map
